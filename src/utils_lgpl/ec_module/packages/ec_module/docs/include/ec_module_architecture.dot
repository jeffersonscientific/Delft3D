/**
 * @file ec_module_architecture.dot
 * @brief EC-Module Architecture Diagram
 * @details Shows the central role of EC-Module in DFlowFM suite data exchange and coupling
 * 
 * To generate diagram in Doxygen, use:
 * @dot
 * digraph ec_architecture {
 *     // Include this file content
 * }
 * @enddot
 */

digraph ec_module_architecture {
    // Graph attributes
    rankdir=TB;
    bgcolor="white";
    fontname="Arial";
    fontsize=12;
    
    // INTERACTIVE FEATURES: All boxes contain clickable links (URL attributes) 
    // that navigate directly to relevant source code files in the repository.
    // Use with Doxygen or GraphViz tools that support URL navigation.
    
    // Node styling
    node [shape=box, style=filled, fontname="Arial", fontsize=10];
    edge [fontname="Arial", fontsize=8, color=gray50];
    
    // Define clusters for grouping
    subgraph cluster_models {
        label="DFlowFM Model Suite";
        style=filled;
        fillcolor="lightgray";
        
        dflowfm [label="D-Flow FM\n(Flow Simulation)", fillcolor="lightblue", URL="../../../../../../engines_gpl/dflowfm"];
        dwaq [label="D-Water Quality\n(Water Quality)", fillcolor="lightgreen", URL="../../../../../../engines_gpl/waq"];
        dmorphology [label="D-Morphology\n(Sediment Transport)", fillcolor="lightyellow", URL="../../../../../../engines_gpl/morphology"];
        dwaves [label="D-Waves\n(Wave Modeling)", fillcolor="lightcoral", URL="../../../../../../engines_gpl/wave"];
    }
    
    subgraph cluster_infrastructure {
        label="Infrastructure Components";
        style=filled;
        fillcolor="lightsteelblue";
        
        ecmodule [label="EC-Module\n(Central Data Exchange)", fillcolor="red", fontcolor="white", URL="../../../../../../utils_lgpl/ec_module"];
        gridgeom [label="Grid Geometry\n(Mesh Operations)", fillcolor="orange", URL="../../../../../../utils_lgpl/gridgeom"];
        netcdf_io [label="NetCDF I/O\n(File Operations)", fillcolor="purple", fontcolor="white", URL="../../../../../../utils_lgpl/io_netcdf"];
    }
    
    // Core EC-Module connections
    ecmodule -> dflowfm [label="meteorology\nboundary conditions"];
    ecmodule -> dwaq [label="flow data\nconcentrations"];
    ecmodule -> dmorphology [label="flow fields\nsediment data"];
    ecmodule -> dwaves [label="flow conditions\nwave forcing"];
    
    // Infrastructure connections
    ecmodule -> gridgeom [label="spatial\ninterpolation"];
    ecmodule -> netcdf_io [label="file I/O\ndata access"];
    
    // Data flow from models back to EC-Module
    dflowfm -> ecmodule [label="computed\nresults", style=dashed];
    
    // Grid geometry support
    gridgeom -> dflowfm [label="mesh data"];
    
    // Title and notes
    labelloc="t";
    label="EC-Module Architecture in DFlowFM Suite";
}